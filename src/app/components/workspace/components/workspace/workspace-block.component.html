<div #workspace class="workspace">
  @if (playlist$ | async; as playlist) {
  <div class="workspace-header">
    <div class="workspace-header-image">
      @if (path === "collection/songs") {
      <div class="workspace-header-image-avatar favorite">
        <svg
          fill="none"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="w-8 h-8 transform scale-95"
        >
          <path
            d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
          ></path>
        </svg>
      </div>
      } @else {
      <img class="workspace-header-image-avatar" [src]="playlist.image" />
      }
    </div>

    <div class="workspace-header-info">
      @if (path === "collection/songs") {
      <p class="workspace-header-info-name">Favorite songs</p>
      } @else {
      <p class="workspace-header-info-name">{{ playlist.name }}</p>
      }

      <p>{{ playlist.user }}</p>
    </div>
  </div>
  <ul class="playlist-songs">
    @for (song of playlist.songs; track song.id; let i = $index) {
    <li class="playlist-song">
      <div class="playlist-song-wrapper">
        <div class="playlist-song-cell index">
          <p class="playlist-song-index">{{ i + 1 }}</p>
        </div>
        <div class="playlist-song-cell song">
          <div class="playlist-song-wrapper-main">
            <div
              class="playlist-song-image"
              (click)="songService.playSong(song)"
            >
              <img [src]="song.image" />
              <div class="playlist-song-image-play">
                <ng-container
                  *ngIf="
                    currentSong$ | async as currentSong;
                    else defaultPlayIcon
                  "
                >
                  <ng-container
                    *ngIf="currentSong.id === song.id; else notCurrentSongIcon"
                  >
                    <ng-container
                      *ngIf="currentSong.isPaused; else playingIcon"
                    >
                      <!-- Paused Icon SVG -->
                      <svg
                        role="img"
                        aria-hidden="true"
                        viewBox="0 0 16 16"
                        fill="currentColor"
                      >
                        <path
                          d="M3 1.713a.7.7 0 0 1 1.05-.607l10.89 6.288a.7.7 0 0 1 0 1.212L4.05 14.894A.7.7 0 0 1 3 14.288V1.713z"
                        ></path>
                      </svg>
                    </ng-container>
                    <ng-template #playingIcon>
                      <!-- Playing Icon SVG -->
                      <svg
                        role="img"
                        aria-hidden="true"
                        viewBox="0 0 16 16"
                        fill="currentColor"
                      >
                        <path
                          d="M2.7 1a.7.7 0 0 0-.7.7v12.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V1.7a.7.7 0 0 0-.7-.7H2.7zm8 0a.7.7 0 0 0-.7.7v12.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V1.7a.7.7 0 0 0-.7-.7h-2.6z"
                        ></path>
                      </svg>
                    </ng-template>
                  </ng-container>
                  <ng-template #notCurrentSongIcon>
                    <!-- Default Play Icon SVG for songs not currently playing -->
                    <svg
                      role="img"
                      aria-hidden="true"
                      viewBox="0 0 16 16"
                      fill="currentColor"
                    >
                      <path
                        d="M3 1.713a.7.7 0 0 1 1.05-.607l10.89 6.288a.7.7 0 0 1 0 1.212L4.05 14.894A.7.7 0 0 1 3 14.288V1.713z"
                      ></path>
                    </svg>
                  </ng-template>
                </ng-container>
                <ng-template #defaultPlayIcon>
                  <!-- Default Play Icon SVG for when there's no current song -->
                  <svg
                    role="img"
                    aria-hidden="true"
                    viewBox="0 0 16 16"
                    fill="currentColor"
                  >
                    <path
                      d="M3 1.713a.7.7 0 0 1 1.05-.607l10.89 6.288a.7.7 0 0 1 0 1.212L4.05 14.894A.7.7 0 0 1 3 14.288V1.713z"
                    ></path>
                  </svg>
                </ng-template>
              </div>
            </div>
            <div class="playlist-song-info">
              <p>{{ song.name }}</p>
              <p class="playlist-song-info-creator">{{ song.creator }}</p>
            </div>
          </div>
        </div>
      </div>
    </li>
    }
  </ul>
  }
</div>
