@if (currentSong$ | async; as currentSong) {
<div class="player">
  <div class="player-main">
    <img [src]="currentSong.image" />
    <div class="player-main-info">
      <p>{{ currentSong.name }}</p>
      <p class="player-main-info-author">{{ currentSong.creator }}</p>
    </div>
  </div>

  <div class="player-buttons">
    <div class="player-buttons-main">
      <button
        class="player-buttons-switch"
        (click)="
          currentSong.playlistId
            ? songService.switchSong(false)
            : songService.switchSong(false, true)
        "
      >
        <svg
          data-encore-id="icon"
          role="img"
          aria-hidden="true"
          viewBox="0 0 16 16"
          fill="currentColor"
        >
          <path
            d="M3.3 1a.7.7 0 0 1 .7.7v5.15l9.95-5.744a.7.7 0 0 1 1.05.606v12.575a.7.7 0 0 1-1.05.607L4 9.149V14.3a.7.7 0 0 1-.7.7H1.7a.7.7 0 0 1-.7-.7V1.7a.7.7 0 0 1 .7-.7h1.6z"
          ></path>
        </svg>
      </button>

      <button (click)="songService.pauseSong()" class="player-buttons-play">
        @if (currentSong.isPaused) {
        <svg role="img" aria-hidden="true" viewBox="0 0 16 16">
          <path
            d="M3 1.713a.7.7 0 0 1 1.05-.607l10.89 6.288a.7.7 0 0 1 0 1.212L4.05 14.894A.7.7 0 0 1 3 14.288V1.713z"
          ></path>
        </svg>
        } @else {
        <svg role="img" aria-hidden="true" viewBox="0 0 16 16">
          <path
            d="M2.7 1a.7.7 0 0 0-.7.7v12.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V1.7a.7.7 0 0 0-.7-.7H2.7zm8 0a.7.7 0 0 0-.7.7v12.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V1.7a.7.7 0 0 0-.7-.7h-2.6z"
          ></path>
        </svg>
        }
      </button>

      <button
        class="player-buttons-switch"
        (click)="
          currentSong.playlistId
            ? songService.switchSong(true)
            : songService.switchSong(true, true)
        "
      >
        <svg
          data-encore-id="icon"
          role="img"
          aria-hidden="true"
          viewBox="0 0 16 16"
          fill="currentColor"
        >
          <path
            d="M12.7 1a.7.7 0 0 0-.7.7v5.15L2.05 1.107A.7.7 0 0 0 1 1.712v12.575a.7.7 0 0 0 1.05.607L12 9.149V14.3a.7.7 0 0 0 .7.7h1.6a.7.7 0 0 0 .7-.7V1.7a.7.7 0 0 0-.7-.7h-1.6z"
          ></path>
        </svg>
      </button>

      <button
        (click)="songService.toggleIsLooped()"
        class="player-buttons-loop"
        [ngClass]="songService.getIsLooped() === true ? 'active' : ''"
      >
        <svg
          data-encore-id="icon"
          role="img"
          aria-hidden="true"
          viewBox="0 0 16 16"
        >
          <path
            fill="currentColor"
            d="M0 4.75A3.75 3.75 0 0 1 3.75 1h8.5A3.75 3.75 0 0 1 16 4.75v5a3.75 3.75 0 0 1-3.75 3.75H9.81l1.018 1.018a.75.75 0 1 1-1.06 1.06L6.939 12.75l2.829-2.828a.75.75 0 1 1 1.06 1.06L9.811 12h2.439a2.25 2.25 0 0 0 2.25-2.25v-5a2.25 2.25 0 0 0-2.25-2.25h-8.5A2.25 2.25 0 0 0 1.5 4.75v5A2.25 2.25 0 0 0 3.75 12H5v1.5H3.75A3.75 3.75 0 0 1 0 9.75v-5z"
          ></path>
        </svg>
      </button>
    </div>

    @if (songService.getCurrentSongTime(); as time) {
    <div class="player-buttons-progress">
      <span class="player-buttons-progress-time">{{
        time.currentTime | formatTime
      }}</span>

      <div class="player-buttons-progress-bar-container" appProgressBar>
        <div class="player-buttons-progress-bar">
          <div class="player-buttons-progress-bar-handler"></div>
        </div>
      </div>

      <span class="player-buttons-progress-time">{{
        time.duration | formatTime
      }}</span>
    </div>
    }
  </div>
</div>
}
